## Лабораторная Работа 3. AsyncIO

**Задание выполнил:** Буряков Иван Олегович ИВТ(1)

### Задание: 

Комплект 1: Библиотека Asyncio.

1.1: Создайте простую асинхронную функцию, которая в бесконечном цикле отображает текущее время с интервалом 1 секунда, и запустите ее с помощью asyncio. Завершать программу можно через комбинацию клавиш типа Ctrl + C или Ctrl + Break .

1.2: Улучшите предыдущую программу. Распечатывайте текущие дату и время в одной и той же строке (используйте символ возврата каретки '\r') разными цветами с помощью библиотеки termcolor. Добавьте обработку события нажатия клавиши Esc с помощью библиотеки pynput, чтобы можно было выйти из программы.

1.3: Разработайте программу, которая использует asyncio.gather для выполнения двух асинхронных задач параллельно и затем обрабатывает результаты в отдельной функции в цикле.

1.4: Улучшите предыдущую программу, сделав параллельно запрос к публичному веб­серверу и к любой публичной базе данных с распечаткой результатов этих вызовов. Например сделайте запросы к публичному ресурсу последовательностей РНК ­ RNACentral: https://rnacentral.org/about-us.
~~~
# https :// rnacentral . org/api
# URL вебсервера−
WEB_SERVER_URL = " https :// rnacentral . org/api/v1/rna/"
# https :// rnacentral . org/help/public−database
# Строкаподключениякбазеданных
DB_CONNECTION_STRING = \
" postgres ://reader :NWDMCE5xdipIjRrp@hh−pgsql−public.ebi.ac.uk:5432/pfmegrnargs "
~~~

В этом случае вам потребуются библиотеки aiohttp ­ для любых HTTP запросов и asyncpg ­ для базы данных Postgres ресурса RNACentral.
Отформатируйте красиво JSON сообщение с помощбю модуля json, если это URL типа https://rnacentral.org/api/v1/rna/.

1.5: Создайте асинхронный веб­скрапер, используя aiohttp и asyncio, который собирает информацию из нескольких веб­страниц одновременно. Вынесите код скрапера в отдельный класс. Загружайте список URLs из отдельного файла.

1.6: Улучшите асинхронный веб­скрапер из предыдущей задачи. Преобразуйте его в класс асинхронного менеджера контекста и используйте вместе с async with изнутри асинхронной функции main, которая вызывается через asyncio.run(main()).

1.7: Реализуйте сервер и клиент с использованием библиотек asyncio и HTTPS протокола для отправки текстовых JSON сообщений, позволяющий передавать текстовые сообщения в обе стороны в цикле с клавиатуры в режиме echo.


___________________________________________
### Решение:
___________________________________________

## Комплект 1: Библиотека Asyncio.

## 1.1

Для создания асинхронной функции, которая будет отображать текущее время с интервалом 1 секунда в бесконечном цикле и остановит выполнение программы при нажатии Ctrl + C, вы можете воспользоваться библиотекой asyncio. Вот пример такой программы:

```python
import asyncio
import signal
import datetime

async def display_time():
    while True:
        current_time = datetime.datetime.now().strftime("%Y-%m-%d %H:%M:%S")
        print(current_time)
        await asyncio.sleep(1)

async def main():
    try:
        await display_time()
    except asyncio.CancelledError:
        pass

def handle_exit():
    loop.stop()

loop = asyncio.get_event_loop()
loop.add_signal_handler(signal.SIGINT, handle_exit)
loop.add_signal_handler(signal.SIGBREAK, handle_exit)

try:
    loop.run_until_complete(main())
except KeyboardInterrupt:
    pass
finally:
    loop.close()
```

Этот код создает асинхронную функцию `display_time`, которая выводит текущее время каждую секунду, и основную асинхронную функцию `main`, которая обрабатывает Ctrl + C. Мы используем `asyncio.sleep(1)` для создания задержки в 1 секунду между отображением времени.

Также мы добавляем обработчики сигналов SIGINT (Ctrl + C) и SIGBREAK (Ctrl + Break) для корректного завершения программы при нажатии соответствующих клавиш.

Запустите эту программу, и она будет выводить текущее время с интервалом 1 секунда, останавливаясь только при нажатии Ctrl + C или Ctrl + Break.

URL: [Лабораторная работа 3](https://replit.com/@Buryackov-Ivan/)



